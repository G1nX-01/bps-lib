function bps(t,s,e,i,h){let d=document.getElementById(t),r=d.getContext("2d"),n=0,o=[],a=h,$={x:0,y:0},u=!1;function p(t){u=!1}d.addEventListener("mousemove",function t(s){$.x=s.clientX-d.offsetLeft,$.y=s.clientY-d.offsetTop}),d.addEventListener("mousedown",function t(s){u=!0,function t(s){for(let e=0;e<30;e++)o.push(new l($.x,$.y))}(30)}),d.addEventListener("mouseup",p),d.width=window.innerWidth-20,d.height=window.innerHeight-20;class l{constructor(t,s){this.borderHits=0,this.radius=2*Math.random()+1,this.x=void 0!==t?t:Math.random()*d.width,this.y=void 0!==s?s:Math.random()*d.height,this.speedX=4*Math.random()-2,this.speedY=4*Math.random()-2,this.color=this.generateRandomColor()}checkCollision(t){let s=this.x-t.x,e=this.y-t.y,i=Math.sqrt(s*s+e*e);if(i<this.radius+t.radius){let h=Math.atan2(e,s),d=Math.sqrt(this.speedX*this.speedX+this.speedY*this.speedY),r=Math.sqrt(t.speedX*t.speedX+t.speedY*t.speedY),n=Math.atan2(this.speedY,this.speedX),o=Math.atan2(t.speedY,t.speedX);this.speedX=r*Math.cos(o-h),this.speedY=r*Math.sin(o-h),t.speedX=d*Math.cos(n-h),t.speedY=d*Math.sin(n-h);let a=.5*(this.radius+t.radius-i+1);this.x+=Math.cos(h)*a,this.y+=Math.sin(h)*a,t.x-=Math.cos(h)*a,t.y-=Math.sin(h)*a}}generateRandomColor(){return`hsla(${60*Math.random()+240}, ${40*Math.random()+40}%, ${30*Math.random()+60}%, ${.6*Math.random()+.8})`}draw(){r.beginPath(),r.arc(this.x,this.y,this.radius,0,2*Math.PI),r.closePath(),r.fillStyle=this.color,r.fill()}update(){let t=1+(i-50)/50*.1,s=e/50;this.x+=this.speedX*t*s,this.y+=this.speedY*t*s;let h=0,r=0;if(a){let o=this.x-$.x,u=this.y-$.y,p=Math.sqrt(o*o+u*u);if(p<100){let l=(100-p)/100;h=o/p*l*20,r=u/p*l*20}}this.x+=(this.speedX+(Math.random()-.5)*1+h)*t*(e/50),this.y+=(this.speedY+(Math.random()-.5)*1+r)*t*(e/50),this.x+this.radius>d.width?(this.x=d.width-this.radius,this.speedX*=-1,this.borderHits++,n++):this.x-this.radius<0&&(this.x=this.radius,this.speedX*=-1,this.borderHits++,n++),this.y+this.radius>d.height?(this.y=d.height-this.radius,this.speedY*=-1,this.borderHits++,n++):this.y-this.radius<0&&(this.y=this.radius,this.speedY*=-1,this.borderHits++,n++)}}function c(){o=[];for(let t=0;t<s;t++)o.push(new l)}function f(){for(let t=0;t<o.length;t++)o[t].draw(),o[t].update()}return c(),!function t(){r.clearRect(0,0,d.width,d.height);for(let s=0;s<o.length;s++)o[s].draw(),o[s].update();requestAnimationFrame(t)}(),{reset:function t(){c()}}}